"use strict";(self.webpackChunkwebshop_client=self.webpackChunkwebshop_client||[]).push([[664],{4664:(x,u,e)=>{e.r(u),e.d(u,{LoginModule:()=>w});var g=e(6895),l=e(433),a=e(6684),p=e(4466),o=e(1571),c=e(2340),h=e(529),m=e(142);let d=(()=>{class n{constructor(i,t,s){this.http=i,this.tokenService=t,this.router=s,this.apiURLAuth=c.N.apiURL+"users"}login(i,t){return this.http.post(`${this.apiURLAuth}/login`,{email:i,password:t})}logout(){this.tokenService.removeToken(),this.router.navigate(["/login"])}}return n.\u0275fac=function(i){return new(i||n)(o.LFG(h.eN),o.LFG(m.g),o.LFG(a.F0))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var f=e(5593),v=e(1740);function Z(n,r){1&n&&(o.TgZ(0,"span"),o._uU(1,"Email is required"),o.qZA())}function F(n,r){1&n&&(o.TgZ(0,"span"),o._uU(1,"Email is invalid"),o.qZA())}function L(n,r){if(1&n&&(o.TgZ(0,"small",18),o.YNc(1,Z,2,0,"span",19),o.YNc(2,F,2,0,"span",19),o.qZA()),2&n){const i=o.oxw();o.xp6(1),o.Q6J("ngIf",null==i.loginForm||null==i.loginForm.email||null==i.loginForm.email.errors?null:i.loginForm.email.errors.required),o.xp6(1),o.Q6J("ngIf",null==i.loginForm||null==i.loginForm.email||null==i.loginForm.email.errors?null:i.loginForm.email.errors.email)}}function T(n,r){1&n&&(o.TgZ(0,"small",18),o._uU(1,"Password is required"),o.qZA())}function A(n,r){if(1&n&&(o.TgZ(0,"div",8)(1,"small",18),o._uU(2),o.qZA()()),2&n){const i=o.oxw();o.xp6(2),o.Oqu(i.authMessage)}}const C=[{path:"",children:[{path:"",pathMatch:"full",redirectTo:"login"},{path:"",component:(()=>{class n{constructor(i,t,s,U){this.formBuilder=i,this.auth=t,this.localstorageService=s,this.router=U,this.isSubmitted=!1,this.authError=!1,this.authMessage="Email or Password are wrong"}ngOnInit(){this._initLoginForm()}_initLoginForm(){this.loginFormGroup=this.formBuilder.group({email:["",[l.kI.required,l.kI.email]],password:["",l.kI.required]})}get loginForm(){return this.loginFormGroup.controls}onSubmit(){if(this.isSubmitted=!0,this.loginForm?.invalid)return;const i={email:this.loginForm?.email.value,password:this.loginForm?.password.value};this.auth.login(i.email,i.password).subscribe({next:t=>{this.authError=!1,this.localstorageService.setToken(t?.token),this.router.navigate(["/"]),setTimeout(()=>{window.location.reload()},500)},error:t=>{console.log(t),this.authError=!0,400!==t.status&&(this.authMessage="Error in the server, please try again later!"),404===t.status&&(this.authMessage="Email or Password are wrong")}})}}return n.\u0275fac=function(i){return new(i||n)(o.Y36(l.qu),o.Y36(d),o.Y36(m.g),o.Y36(a.F0))},n.\u0275cmp=o.Xpm({type:n,selectors:[["users-selector"]],decls:29,vars:4,consts:[[1,"login-register"],[1,"login-register-panel"],[1,"grid"],[1,"col-6"],["src","assets/img/logo.png","alt","",2,"max-width","100%"],[1,"col-6","p-5"],[3,"formGroup"],[1,"grid","mt-6"],[1,"col-12"],[1,"p-inputgroup"],[1,"p-inputgroup-addon"],[1,"pi","pi-user"],["type","text","formControlName","email","e","","pInputText","","placeholder","Email"],["class","p-error",4,"ngIf"],[1,"pi","pi-lock"],["formControlName","password","type","password","pInputText","","placeholder","Password"],["styleClass","full-btn","label","Submit",3,"onClick"],["class","col-12",4,"ngIf"],[1,"p-error"],[4,"ngIf"]],template:function(i,t){1&i&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),o._UZ(4,"img",4),o.qZA(),o.TgZ(5,"div",5)(6,"h3"),o._uU(7,"Welcome!"),o.qZA(),o.TgZ(8,"h2"),o._uU(9,"Login Page"),o.qZA(),o.TgZ(10,"h4"),o._uU(11,"Demo Account : User: guest@gmail.com; pass: 123456"),o.qZA(),o.TgZ(12,"form",6)(13,"div",7)(14,"div",8)(15,"div",9)(16,"span",10),o._UZ(17,"i",11),o.qZA(),o._UZ(18,"input",12),o.qZA(),o.YNc(19,L,3,2,"small",13),o.qZA(),o.TgZ(20,"div",8)(21,"div",9)(22,"span",10),o._UZ(23,"i",14),o.qZA(),o._UZ(24,"input",15),o.qZA(),o.YNc(25,T,2,0,"small",13),o.qZA(),o.TgZ(26,"div",8)(27,"p-button",16),o.NdJ("onClick",function(){return t.onSubmit()}),o.qZA()(),o.YNc(28,A,3,1,"div",17),o.qZA()()()()()()),2&i&&(o.xp6(12),o.Q6J("formGroup",t.loginFormGroup),o.xp6(7),o.Q6J("ngIf",(null==t.loginForm||null==t.loginForm.email?null:t.loginForm.email.invalid)&&t.isSubmitted),o.xp6(6),o.Q6J("ngIf",(null==t.loginForm||null==t.loginForm.password?null:t.loginForm.password.invalid)&&t.isSubmitted),o.xp6(3),o.Q6J("ngIf",t.isSubmitted&&t.authError))},dependencies:[g.O5,f.zx,v.o,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u],styles:[".login-register[_ngcontent-%COMP%]{max-width:1300px;margin:0 auto;height:100vh;display:flex;align-items:center;justify-content:center}.login-register-panel[_ngcontent-%COMP%]{width:650px;height:525px;background-color:var(--surface-a)}.login-register-panel[_ngcontent-%COMP%]   .full-btn[_ngcontent-%COMP%]{width:100%}"]}),n})()}]}];let w=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[g.ez,p.m,a.Bz.forChild(C),l.UX]}),n})()}}]);